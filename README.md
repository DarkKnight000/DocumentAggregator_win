# Document aggregator

Проект глобального Web-API приложения для автоматизации документооборота.

Требования:
- Доступ из существующей инфраструктуры\
	Данный проект должен быть легко интегрируем в существующую систему создания и обработки заявок. Для этого выбран тип проекта Web-API с фреймворком ASP.NET.
- Расширяемость\
	Так как проект новый, перспективный и экспериментальный, используется итеративная модель разработки, позволяющая начинать с малых задач и далее наращивать функционал.\
	Кроме того, архитектурой для данного проекта выбрана "[Clean Architecture](https://fullstackmark.com/post/18/building-aspnet-core-web-apis-with-clean-architecture)", благодаря которой ослабляются связи между классами, улучшается тестируемость и расширяемость кода.

---
В названиях классов в проекте чаще всего "заявка" как `request` заменено словом `claim` для избежания путаницы с "запросом заявки".

## Корпоративный уровень - Сущности

### Бизнес-объекты

- Claim - Заявка
- Insert - Вставка

### Случаи использования

Обработка заявки
- ClaimRequest - Запрос на заявку
- ClaimResponse - Ответ от генератора
- ClaimInteractor - Класс обработки заявки

Обработка вставки
- InsertRequest - Запрос на вставку
- InsertResponse - Ответ на вставку
- ParseInsertInteractor - Класс обработки вставки

### Интерфейсы

- IClaimRepository - Репозиторий объектов `Claim`
- IInsertionRepository - Репозиторий объектов `Insertion`
- IEditorService - Сервис редактора документа

## Уровень приложения - Случай использования
|||
|-|-|
|Заголовок|Сборщик документов|
|Описание|Сервер базы данных обращается по запросу к программе с набором аргументов, достаточных для генерации отчётности. Затем считывает сгенерированный документ на выходе.|
|Основное действующее лицо|Сервер базы данных|
|Предварительные условия|<ul><li>Заявка создана</li><li>Обязательные поля заявки заполнены</li></ul>|
|Последовательные условия|Создан отчёт по конкретной заявке|
|Основной успешный сценарий|<ol><li>Сервер посылает HTTP запрос с данными о заявке.</li><li>Система проверяет и дополняет данные из базы данных.</li><li>Система сопоставляет поля заявки с полученными данными и заполняет шаблон.</li><li>Система возвращает поток с содержимым файла или ссылку на файл.</li></ol>|
|Расширения|<ul><li>(2a) Нет доступных данных по заявке.</li><ol><li>Система возвращает ответ с кодом, текстом ошибки и дополнительными данными.</li></ol><li>(3a) Найдено поле с отсутствующим значением.</li><ol><li>Система возвращает ответ с кодом, текстом ошибки и дополнительными данными.</li></ol></ul>|

Сответствие полей:
|Поле заявки (значение)|Поле шаблона (упоминание)|Результат|
|-|-|-|
|отсутствует|отсутствует|Корректно.|
|отсутствует|присутствует|Генерация продолжается, но поле документа остаётся пустым.<br/>Выдаётся предупреждение.|
|присутствует|отсутствует|Корректно.<br/>*Возможна запись в локальный лог.*|
|присутствует|присутствует|Корректно.|

## Уровень адаптеров интерфейсов

TODO: OracleDatabase

TODO: WordService

## Уровень программного интерфейса приложения

TODO: описать соглашения API
